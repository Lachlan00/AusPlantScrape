family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
}
sp <- split(sp, " ")
sp
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- sp[1]
genus <- unlist(sp[1])
sp <- unlist(sp[2])
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
sp[1]
genus <- unlist(sp[1])
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
df_ls[[j]][k]$group <- group
df_ls[[j]]
rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
# Convert Paul's list
# This code will work only on this list
# setwd
setwd("~/Development/Royal_botanical_photo_downloader")
# load in list
list_rw <- readLines('Plant_list_csv.txt')
# trim bottom
list_rw <- list_rw[1:280]
# grab idx dividers
div_idx <- grep("^$", list_rw)
# group list
group_names <- list("native", "intro", "native.gone", "intro.gone")
# split into plant groups
list_native <- list_rw[1:div_idx[1]-1]
list_intro <- list_rw[(div_idx[1]+1):(div_idx[2]-1)]
list_native.gone <- list_rw[(div_idx[2]+1):(div_idx[3]-1)]
list_intro.gone <- list_rw[(div_idx[3]+1):length(list_rw)]
# save to list
groups <- list(list_native, list_intro, list_native.gone, list_intro.gone)
remove(list_rw, div_idx)
# grab logical if genus-species
sp_native <- grepl("^(\\w+\\W+\\w+).*$", list_native)
sp_native.gone <- grepl("^(\\w+\\W+\\w+).*$", list_native.gone)
sp_intro <- grepl("^(\\w+\\W+\\w+).*$", list_intro)
sp_intro.gone <- grepl("^(\\w+\\W+\\w+).*$", list_intro.gone)
# save to list
species <- list(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
remove(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
# grab logical for families (make title FASLE)
fam_native <- grepl("^\\w+$", list_native[1:length(list_native)])
fam_native[1] <- FALSE
fam_native.gone <- grepl("^\\w+$", list_native.gone[1:length(list_native.gone)])
fam_native.gone[1] <- FALSE
fam_intro <- grepl("^\\w+$", list_intro[1:length(list_intro)])
fam_intro[1] <- FALSE
fam_intro.gone <- grepl("^\\w+$", list_intro.gone[1:length(list_intro.gone)])
fam_intro.gone[1] <- FALSE
# save to list
families <- list(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
remove(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
# grab logical if subsp. or var.
var_native <- grepl("subsp.|var.", list_native)
var_native.gone <- grepl("subsp.|var.", list_native.gone)
var_intro <- grepl("subsp.|var.", list_intro)
var_intro.gone <- grepl("subsp.|var.", list_intro.gone)
# save to list
vars <- list(var_native, var_intro, var_native.gone, var_intro.gone)
remove(var_native, var_intro, var_native.gone, var_intro.gone)
# remove lists
remove(list_native, list_intro, list_native.gone, list_intro.gone)
# make emty data frame
df <- data.frame(group=character(),
family=character(),
genus=character(),
species=character(),
sub.var=character())
# make for imstances of data.frame in list
df_ls <- list(df, df, df, df)
remove(df)
# trim fat
for (i in 1:length(groups)){
groups[[i]] <- sub(' N .*$| C .*$| N[0-9].*$| C[0-9].*$', '', groups[[i]])
}
# now to turn everything into a nice table
# natives
for (j in 1:length(groups)){
group <- unlist(group_names[j])
for (i in 2:length(groups[[j]])){
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
}
}
# Convert Paul's list
# This code will work only on this list
# setwd
setwd("~/Development/Royal_botanical_photo_downloader")
# load in list
list_rw <- readLines('Plant_list_csv.txt')
# trim bottom
list_rw <- list_rw[1:280]
# grab idx dividers
div_idx <- grep("^$", list_rw)
# group list
group_names <- list("native", "intro", "native.gone", "intro.gone")
# split into plant groups
list_native <- list_rw[1:div_idx[1]-1]
list_intro <- list_rw[(div_idx[1]+1):(div_idx[2]-1)]
list_native.gone <- list_rw[(div_idx[2]+1):(div_idx[3]-1)]
list_intro.gone <- list_rw[(div_idx[3]+1):length(list_rw)]
# save to list
groups <- list(list_native, list_intro, list_native.gone, list_intro.gone)
remove(list_rw, div_idx)
# grab logical if genus-species
sp_native <- grepl("^(\\w+\\W+\\w+).*$", list_native)
sp_native.gone <- grepl("^(\\w+\\W+\\w+).*$", list_native.gone)
sp_intro <- grepl("^(\\w+\\W+\\w+).*$", list_intro)
sp_intro.gone <- grepl("^(\\w+\\W+\\w+).*$", list_intro.gone)
# save to list
species <- list(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
remove(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
# grab logical for families (make title FASLE)
fam_native <- grepl("^\\w+$", list_native[1:length(list_native)])
fam_native[1] <- FALSE
fam_native.gone <- grepl("^\\w+$", list_native.gone[1:length(list_native.gone)])
fam_native.gone[1] <- FALSE
fam_intro <- grepl("^\\w+$", list_intro[1:length(list_intro)])
fam_intro[1] <- FALSE
fam_intro.gone <- grepl("^\\w+$", list_intro.gone[1:length(list_intro.gone)])
fam_intro.gone[1] <- FALSE
# save to list
families <- list(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
remove(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
# grab logical if subsp. or var.
var_native <- grepl("subsp.|var.", list_native)
var_native.gone <- grepl("subsp.|var.", list_native.gone)
var_intro <- grepl("subsp.|var.", list_intro)
var_intro.gone <- grepl("subsp.|var.", list_intro.gone)
# save to list
vars <- list(var_native, var_intro, var_native.gone, var_intro.gone)
remove(var_native, var_intro, var_native.gone, var_intro.gone)
# remove lists
remove(list_native, list_intro, list_native.gone, list_intro.gone)
# make emty data frame
df <- data.frame(group=character(),
family=character(),
genus=character(),
species=character(),
sub.var=character())
# make for imstances of data.frame in list
df_ls <- list(df, df, df, df)
remove(df)
# trim fat
for (i in 1:length(groups)){
groups[[i]] <- sub(' N .*$| C .*$| N[0-9].*$| C[0-9].*$', '', groups[[i]])
}
j <- 1
group <- unlist(group_names[j])
for (i in 2:length(groups[[j]])){
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
}
# Convert Paul's list
# This code will work only on this list
# setwd
setwd("~/Development/Royal_botanical_photo_downloader")
# load in list
list_rw <- readLines('Plant_list_csv.txt')
# trim bottom
list_rw <- list_rw[1:280]
# grab idx dividers
div_idx <- grep("^$", list_rw)
# group list
group_names <- list("native", "intro", "native.gone", "intro.gone")
# split into plant groups
list_native <- list_rw[1:div_idx[1]-1]
list_intro <- list_rw[(div_idx[1]+1):(div_idx[2]-1)]
list_native.gone <- list_rw[(div_idx[2]+1):(div_idx[3]-1)]
list_intro.gone <- list_rw[(div_idx[3]+1):length(list_rw)]
# save to list
groups <- list(list_native, list_intro, list_native.gone, list_intro.gone)
remove(list_rw, div_idx)
# grab logical if genus-species
sp_native <- grepl("^(\\w+\\W+\\w+).*$", list_native)
sp_native.gone <- grepl("^(\\w+\\W+\\w+).*$", list_native.gone)
sp_intro <- grepl("^(\\w+\\W+\\w+).*$", list_intro)
sp_intro.gone <- grepl("^(\\w+\\W+\\w+).*$", list_intro.gone)
# save to list
species <- list(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
remove(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
# grab logical for families (make title FASLE)
fam_native <- grepl("^\\w+$", list_native[1:length(list_native)])
fam_native[1] <- FALSE
fam_native.gone <- grepl("^\\w+$", list_native.gone[1:length(list_native.gone)])
fam_native.gone[1] <- FALSE
fam_intro <- grepl("^\\w+$", list_intro[1:length(list_intro)])
fam_intro[1] <- FALSE
fam_intro.gone <- grepl("^\\w+$", list_intro.gone[1:length(list_intro.gone)])
fam_intro.gone[1] <- FALSE
# save to list
families <- list(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
remove(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
# grab logical if subsp. or var.
var_native <- grepl("subsp.|var.", list_native)
var_native.gone <- grepl("subsp.|var.", list_native.gone)
var_intro <- grepl("subsp.|var.", list_intro)
var_intro.gone <- grepl("subsp.|var.", list_intro.gone)
# save to list
vars <- list(var_native, var_intro, var_native.gone, var_intro.gone)
remove(var_native, var_intro, var_native.gone, var_intro.gone)
# remove lists
remove(list_native, list_intro, list_native.gone, list_intro.gone)
# make emty data frame
df <- data.frame(group=character(),
family=character(),
genus=character(),
species=character(),
sub.var=character())
# make for imstances of data.frame in list
df_ls <- list(df, df, df, df)
remove(df)
# trim fat
for (i in 1:length(groups)){
groups[[i]] <- sub(' N .*$| C .*$| N[0-9].*$| C[0-9].*$', '', groups[[i]])
}
j <- 1
group <- unlist(group_names[j])
i <- 2
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
i <- 3
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
# Convert Paul's list
# This code will work only on this list
# setwd
setwd("~/Development/Royal_botanical_photo_downloader")
# load in list
list_rw <- readLines('Plant_list_csv.txt')
# trim bottom
list_rw <- list_rw[1:280]
# grab idx dividers
div_idx <- grep("^$", list_rw)
# group list
group_names <- list("native", "intro", "native.gone", "intro.gone")
# split into plant groups
list_native <- list_rw[1:div_idx[1]-1]
list_intro <- list_rw[(div_idx[1]+1):(div_idx[2]-1)]
list_native.gone <- list_rw[(div_idx[2]+1):(div_idx[3]-1)]
list_intro.gone <- list_rw[(div_idx[3]+1):length(list_rw)]
# save to list
groups <- list(list_native, list_intro, list_native.gone, list_intro.gone)
remove(list_rw, div_idx)
# grab logical if genus-species
sp_native <- grepl("^(\\w+\\W+\\w+).*$", list_native)
sp_native.gone <- grepl("^(\\w+\\W+\\w+).*$", list_native.gone)
sp_intro <- grepl("^(\\w+\\W+\\w+).*$", list_intro)
sp_intro.gone <- grepl("^(\\w+\\W+\\w+).*$", list_intro.gone)
# save to list
species <- list(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
remove(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
# grab logical for families (make title FASLE)
fam_native <- grepl("^\\w+$", list_native[1:length(list_native)])
fam_native[1] <- FALSE
fam_native.gone <- grepl("^\\w+$", list_native.gone[1:length(list_native.gone)])
fam_native.gone[1] <- FALSE
fam_intro <- grepl("^\\w+$", list_intro[1:length(list_intro)])
fam_intro[1] <- FALSE
fam_intro.gone <- grepl("^\\w+$", list_intro.gone[1:length(list_intro.gone)])
fam_intro.gone[1] <- FALSE
# save to list
families <- list(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
remove(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
# grab logical if subsp. or var.
var_native <- grepl("subsp.|var.", list_native)
var_native.gone <- grepl("subsp.|var.", list_native.gone)
var_intro <- grepl("subsp.|var.", list_intro)
var_intro.gone <- grepl("subsp.|var.", list_intro.gone)
# save to list
vars <- list(var_native, var_intro, var_native.gone, var_intro.gone)
remove(var_native, var_intro, var_native.gone, var_intro.gone)
# remove lists
remove(list_native, list_intro, list_native.gone, list_intro.gone)
# make emty data frame
df <- data.frame(group=character(),
family=character(),
genus=character(),
species=character(),
sub.var=character())
# make for imstances of data.frame in list
df_ls <- list(df, df, df, df)
remove(df)
# trim fat
for (i in 1:length(groups)){
groups[[i]] <- sub(' N .*$| C .*$| N[0-9].*$| C[0-9].*$', '', groups[[i]])
}
# now to turn everything into a nice table
# natives
for (j in 1:length(groups)){
group <- unlist(group_names[j])
for (i in 2:length(groups[[j]])){
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
df_ls[[j]] <- rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
}
}
df_ls[[1]]
df <- rbind(df_ls)
df <- rbind(df_ls[[1:4]])
df <- rbind(df_ls[[1]], df_ls[[2]], df_ls[[3]], df_ls[[4]])
df
# Convert Paul's list
# This code will work only on this list
# setwd
setwd("~/Development/Royal_botanical_photo_downloader")
# load in list
list_rw <- readLines('Plant_list_csv.txt')
# trim bottom
list_rw <- list_rw[1:280]
# grab idx dividers
div_idx <- grep("^$", list_rw)
# group list
group_names <- list("native", "intro", "native.gone", "intro.gone")
# split into plant groups
list_native <- list_rw[1:div_idx[1]-1]
list_intro <- list_rw[(div_idx[1]+1):(div_idx[2]-1)]
list_native.gone <- list_rw[(div_idx[2]+1):(div_idx[3]-1)]
list_intro.gone <- list_rw[(div_idx[3]+1):length(list_rw)]
# save to list
groups <- list(list_native, list_intro, list_native.gone, list_intro.gone)
remove(list_rw, div_idx)
# grab logical if genus-species
sp_native <- grepl("^(\\w+\\W+\\w+).*$", list_native)
sp_native.gone <- grepl("^(\\w+\\W+\\w+).*$", list_native.gone)
sp_intro <- grepl("^(\\w+\\W+\\w+).*$", list_intro)
sp_intro.gone <- grepl("^(\\w+\\W+\\w+).*$", list_intro.gone)
# save to list
species <- list(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
remove(sp_native, sp_intro, sp_native.gone, sp_intro.gone)
# grab logical for families (make title FASLE)
fam_native <- grepl("^\\w+$", list_native[1:length(list_native)])
fam_native[1] <- FALSE
fam_native.gone <- grepl("^\\w+$", list_native.gone[1:length(list_native.gone)])
fam_native.gone[1] <- FALSE
fam_intro <- grepl("^\\w+$", list_intro[1:length(list_intro)])
fam_intro[1] <- FALSE
fam_intro.gone <- grepl("^\\w+$", list_intro.gone[1:length(list_intro.gone)])
fam_intro.gone[1] <- FALSE
# save to list
families <- list(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
remove(fam_native, fam_intro, fam_native.gone, fam_intro.gone)
# grab logical if subsp. or var.
var_native <- grepl("subsp.|var.", list_native)
var_native.gone <- grepl("subsp.|var.", list_native.gone)
var_intro <- grepl("subsp.|var.", list_intro)
var_intro.gone <- grepl("subsp.|var.", list_intro.gone)
# save to list
vars <- list(var_native, var_intro, var_native.gone, var_intro.gone)
remove(var_native, var_intro, var_native.gone, var_intro.gone)
# remove lists
remove(list_native, list_intro, list_native.gone, list_intro.gone)
# make emty data frame
df <- data.frame(group=character(),
family=character(),
genus=character(),
species=character(),
sub.var=character())
# make for imstances of data.frame in list
df_ls <- list(df, df, df, df)
remove(df)
# trim fat
for (i in 1:length(groups)){
groups[[i]] <- sub(' N .*$| C .*$| N[0-9].*$| C[0-9].*$', '', groups[[i]])
}
# now to turn everything into a nice table
# natives
for (j in 1:length(groups)){
group <- unlist(group_names[j])
for (i in 2:length(groups[[j]])){
subsp <- NA
line <- groups[[j]][i]
if (families[[j]][i] == TRUE){
family <- line
family <- gsub(" ", "", family, fixed = TRUE)
}
if (vars[[j]][i] == TRUE){
subsp <- sub("^(\\w+\\W+\\w+) ", "", line)
}
if (species[[j]][i] == TRUE){
sp <- sub(" var.*$| subsp.*$", "", line)
sp <- strsplit(sp, " ")
genus <- unlist(sp[[1]][1])
sp <- unlist(sp[[1]][2])
# add to dataframe
df_ls[[j]] <- rbind(df_ls[[j]], data.frame(group=group,
family=family,
genus=genus,
species=sp,
sub.var=subsp))
}
}
}
# bind all data.frmes
df <- rbind(df_ls[[1]], df_ls[[2]], df_ls[[3]], df_ls[[4]])
df
write.csv(df, 'prcoessed_plant-list.csv')
write.csv(df, 'prcoessed_plant-list.csv', row.names = FALSE)
system("python AusPlantImageIndex_WebScraper.py")
system("python AusPlantImageIndex_WebScraper.py")
system("python AusPlantImageIndex_WebScraper.py")
